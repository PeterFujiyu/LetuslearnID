<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    body { font-family: Arial, sans-serif; margin:0; padding:40px; background:#f5f5f5; animation:fadeIn .3s ease; }
    .container { max-width:600px; margin:0 auto; background:#fff; padding:20px; border-radius:8px; box-shadow:0 2px 4px rgba(0,0,0,0.1); }
    h1 { text-align:center; }
    table { width:100%; border-collapse:collapse; margin-top:10px; }
    th,td { border:1px solid #ddd; padding:8px; text-align:left; }
    th { background:#eee; }
    .button { padding:6px 12px; margin-top:10px; background:#000; color:#fff; border:none; border-radius:20px; cursor:pointer; }
    .button:hover{background:#333;}
    @keyframes fadeIn { from{opacity:0;} to{opacity:1;} }
  </style>
</head>
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
  <script>
    function AdminApp(){
      const [users,setUsers]=React.useState([]);
      const [groups,setGroups]=React.useState([]);
      const token=localStorage.getItem('token');
      React.useEffect(()=>{
        if(!token){window.location.href='/index/index.html';return;}
        fetch('/admin/users',{headers:{'Authorization':'Bearer '+token}}).then(r=>r.ok?r.json():Promise.reject()).then(setUsers).catch(()=>window.location.href='/index/index.html');
        fetch('/admin/groups',{headers:{'Authorization':'Bearer '+token}}).then(r=>r.ok?r.json():[]).then(setGroups);
      },[]);
      return React.createElement('div',{className:'container'},[
        React.createElement('h1',{key:0},'Admin'),
        React.createElement('h2',{key:1},'Users'),
        React.createElement('table',{key:2},[
          React.createElement('thead',{key:0},React.createElement('tr',null,[React.createElement('th',{key:0},'ID'),React.createElement('th',{key:1},'Name')])),
          React.createElement('tbody',{key:1},users.map(u=>React.createElement('tr',{key:u.id},[React.createElement('td',{key:0},u.id),React.createElement('td',{key:1},u.username)])))
        ]),
        React.createElement('h2',{key:3},'Groups'),
        React.createElement('ul',{key:4},groups.map(g=>React.createElement('li',{key:g.id},g.name)))
      ]);
    }
    ReactDOM.render(React.createElement(AdminApp), document.getElementById('root'));
  </script>
</body>
</html>
